{% extends "layout.html" %}

{% block title %}Upload - Homework Hub{% endblock %}

{% block content %}
<main class="container py-5">
  <h2 class="text-primary text-center mb-4">⬆️ Upload Homework & Files</h2>

  <form id="uploadForm" enctype="multipart/form-data">
    <div class="mb-3">
      <label for="subject" class="form-label">Subject</label>
      <select class="form-select" id="subject" name="subject" required>
        <option value="" selected disabled>Select Subject</option>
        <option value="Math">Math</option>
        <option value="English">English</option>
        <option value="Science">Science</option>
        <option value="Social Studies">Social Studies</option>
      </select>
    </div>

    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea
        class="form-control"
        id="description"
        name="description"
        rows="3"
        placeholder="Enter homework or file description"
        required
      ></textarea>
    </div>

    <div class="mb-3">
      <label for="fileUpload" class="form-label">Choose File</label>
      <input
        class="form-control"
        type="file"
        id="fileUpload"
        name="fileUpload"
        accept=".pdf,.doc,.docx,.txt,.jpg,.png"
        required
      />
    </div>

    <button type="submit" class="btn btn-primary">Upload</button>
  </form>

  <div id="uploadStatus" class="mt-3"></div>
</main>

<script>
  // Basic frontend form handling (no backend)
  const form = document.getElementById('uploadForm');
  const statusDiv = document.getElementById('uploadStatus');

  form.addEventListener('submit', function(event) {
    event.preventDefault();

    const subject = form.subject.value;
    const description = form.description.value.trim();
    const file = form.fileUpload.files[0];

    if (!subject || !description || !file) {
      statusDiv.innerHTML = '<div class="alert alert-danger">Please fill all fields and select a file.</div>';
      return;
    }

    statusDiv.innerHTML = `
      <div class="alert alert-success">
        Successfully uploaded "<strong>${file.name}</strong>" for <strong>${subject}</strong>!
      </div>
    `;

    form.reset();
  });
</script>
{% endblock %}
